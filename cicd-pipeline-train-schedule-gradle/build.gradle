/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */
plugins {
  id "com.moowork.node" version "1.2.0"
}
/*
* downloand and install node.js and npm locally for this project
* ensure the node.js and npm are packaged 
*/
node {
  download = true
}

task build 

task zip(type: Zip) {
  from ('.'){
    include "*"
    include "bin/**"
    include "data/**"
    include "node_modules/**"
    include "public/**"
    include "routes/**"
    include "views/**"
  }
  destinationDir(file("dist"))
  baseName "trainSchedule"
}

build.dependsOn zip
zip.dependsOn npm_build 
/*
*whenever build task is called, it makes sure npm build task is called as well
*/
build.dependsOn npm_build

npm_build.dependsOn npmInstall

/*
*run test to make sure the app runs properly
*/
npm_build.dependsOn npm_test
npm_test.dependsOn npmInstall


/*
*create a single file we can deploy to any server 
*/ 


